import{Q as g,a as T}from"./QBtn.6cab167c.js";import{Q as D}from"./QInput.43f86c85.js";import{Q as G,a as S,b as I,c as F}from"./QTable.77a9550e.js";import{P as w,_ as R}from"./mapView.821e84db.js";import{s as c,A as N,j as H,o as f,c as C,w as l,a as e,E as k,Z as b,V as Y,W as y,X as U,Y as x,$ as V,a0 as z,C as Q,ac as J}from"./index.fc4d1fc7.js";import{Q as _,a as M,b as L}from"./QCard.40996e4c.js";import{Q as W,a as q,b as X,c as K}from"./QFile.e5504ec7.js";import{Q as A}from"./QSeparator.a2d8f17d.js";import{Q as Z}from"./QDialog.fdb88d66.js";import{Q as O}from"./QImg.92d61c0d.js";import{Q as j,a as B}from"./QTabPanels.6a722bbc.js";import"./dom.cd849552.js";import"./scroll.eb09e63a.js";import"./QItemLabel.b40969aa.js";import"./position-engine.bccaf70a.js";import"./touch.3df10340.js";const ee=[{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"name",align:"center",label:"User Name",field:"user",sortable:!0,format:r=>`${r.name}`},{name:"title",align:"center",label:"Title",field:"title",sortable:!0},{name:"description",align:"center",label:"Description",field:"description",sortable:!0,format:r=>`${r.slice(0,40)} ...`}],E=c(),h=c({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:100}),$=r=>{r?w.allPostsForAdmin(r.pagination.page).then(m=>{var s,t,p,i,d,v;E.value=m.data.posts,h.value.page=(p=(t=(s=m.data.meta)==null?void 0:s.pagination)==null?void 0:t.posts.current_page)!=null?p:1,h.value.rowsNumber=(v=(d=(i=m.data.meta)==null?void 0:i.pagination)==null?void 0:d.posts.total)!=null?v:1}):w.allPostsForAdmin(1).then(m=>{var s,t,p,i,d,v;E.value=m.data.posts,h.value.page=(p=(t=(s=m.data.meta)==null?void 0:s.pagination)==null?void 0:t.posts.current_page)!=null?p:1,h.value.rowsNumber=(v=(d=(i=m.data.meta)==null?void 0:i.pagination)==null?void 0:d.posts.total)!=null?v:1})};$(null);const te={class:"text-h6"},ae="bg-red q-pa-sm text-white",le="bg-green q-pa-sm text-white",se=N({__name:"AdminUpdatePost",props:{modelValue:{default:!1},id:{default:0},title:{default:"Update"},description:{default:"No Description"},latitude:{default:37.28},longitude:{default:49.6},refresh:{}},emits:["update:model-value"],setup(r,{emit:m}){const s=r,t=c({title:"",description:"",image:void 0,latitude:37.28,longitude:49.6});H(s,()=>{t.value={title:s.title,description:s.description,image:t.value.image,latitude:s.latitude,longitude:s.longitude}});const p=c(!0),i=c({error:[],state:""}),d=()=>{p.value=!p.value},v=()=>{m.call(this,"update:model-value",!1)},u=()=>{w.adminUpdatePost(s.id,t.value.title,t.value.description,t.value.image,t.value.latitude,t.value.longitude).then(n=>{n.status==200&&n.data.errors&&(i.value.error=n.data.errors,i.value.state=le,p.value=!1,s.refresh(),setTimeout(()=>{m.call(this,"update:model-value",!1)},2e3))},n=>{n.response.status!=200&&n.response.data.errors&&(i.value.error=n.response.data.errors,i.value.state=ae,p.value=!1)})};return(n,a)=>(f(),C(Z,{"model-value":r.modelValue,persistent:""},{default:l(()=>[e(L,{style:{"min-width":"350px"}},{default:l(()=>[e(_,null,{default:l(()=>[k("div",te,"Update Post "+b(s.title),1)]),_:1}),e(_,{class:"q-pt-none"},{default:l(()=>[e(W,{class:Y(i.value.state),hidden:p.value},{default:l(()=>[e(q,null,{default:l(()=>[e(g,{size:"sm",color:"transparent",dense:"",icon:"close",onClick:a[0]||(a[0]=o=>d())})]),_:1}),e(A,{inset:"",dark:""}),(f(!0),y(V,null,U(i.value.error,o=>(f(),C(q,{key:o},{default:l(()=>[e(X,null,{default:l(()=>[x(b(o[0]),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["class","hidden"])]),_:1}),e(_,{class:"q-pt-none"},{default:l(()=>[e(D,{dense:"","model-value":t.value.title,"onUpdate:modelValue":a[1]||(a[1]=o=>t.value.title=o),label:"Enter Your Title"},null,8,["model-value"])]),_:1}),e(_,{class:"q-pt-none"},{default:l(()=>[e(D,{type:"textarea",dense:"","model-value":t.value.description,"onUpdate:modelValue":a[2]||(a[2]=o=>t.value.description=o),label:"Enter Your Description"},null,8,["model-value"])]),_:1}),e(_,{class:"q-pt-none"},{default:l(()=>[e(K,{filled:"","bottom-slots":"","model-value":t.value.image,"onUpdate:modelValue":a[5]||(a[5]=o=>t.value.image=o),label:"Post Image",counter:""},{prepend:l(()=>[e(T,{name:"cloud_upload",onClick:a[3]||(a[3]=z(()=>{},["stop","prevent"]))})]),append:l(()=>[e(T,{name:"close",onClick:a[4]||(a[4]=z(o=>t.value.image=null,["stop","prevent"])),class:"cursor-pointer"})]),hint:l(()=>[x(" File Size ")]),_:1},8,["model-value"])]),_:1}),e(R,{latitude:t.value.latitude,"onUpdate:latitude":a[6]||(a[6]=o=>t.value.latitude=o),longitude:t.value.longitude,"onUpdate:longitude":a[7]||(a[7]=o=>t.value.longitude=o),state:"update"},null,8,["latitude","longitude"]),e(M,{align:"right",class:"text-primary"},{default:l(()=>[e(g,{color:"red","icon-right":"close",label:"Cancel",onClick:v}),e(g,{color:"light-blue-8","icon-right":"update",label:"Update",onClick:u})]),_:1})]),_:1})]),_:1},8,["model-value"]))}});const oe={class:"row no-wrap items-center"},ie={class:"col text-h6 ellipsis"},ue={class:"text-subtitle1"},ne={class:"text-caption text-grey"},de="bg-red q-pa-sm text-white",re="bg-green q-pa-sm text-white",me=N({__name:"AdminDeletePost",props:{modelValue:{default:!1},id:{default:0},img:{default:"No Image"},title:{default:"Title"},username:{default:"name"},description:{default:"No Description"},latitude:{default:37.28},longitude:{default:49.6},refresh:{}},emits:["update:model-value"],setup(r,{emit:m}){const s=r,t=c("image"),p=()=>{t.value=="image"?t.value="map":t.value="image"},i=c(!0),d=c({error:[],state:""}),v=()=>{i.value=!i.value},u=()=>{m.call(this,"update:model-value",!1)},n=()=>{w.adminDeletePost(s.id).then(a=>{a.status==200&&a.data.errors&&(d.value.error=a.data.errors,d.value.state=re,i.value=!1,s.refresh(),setTimeout(()=>{m.call(this,"update:model-value",!1)},2e3))},a=>{a.response.status!=200&&a.response.data.errors&&(d.value.error=a.response.data.errors,d.value.state=de,i.value=!1)})};return(a,o)=>(f(),C(Z,{"model-value":r.modelValue,persistent:""},{default:l(()=>[e(L,{class:"my-card",style:{"min-width":"350px"}},{default:l(()=>[e(_,null,{default:l(()=>[e(W,{class:Y(d.value.state),hidden:i.value},{default:l(()=>[e(q,null,{default:l(()=>[e(g,{size:"sm",color:"transparent",dense:"",icon:"close",onClick:o[0]||(o[0]=P=>v())})]),_:1}),e(A,{inset:"",dark:""}),(f(!0),y(V,null,U(d.value.error,P=>(f(),C(q,{key:P},{default:l(()=>[e(X,null,{default:l(()=>[x(b(P[0]),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["class","hidden"])]),_:1}),e(j,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=P=>t.value=P),animated:"",class:"full-width"},{default:l(()=>[e(B,{name:"image"},{default:l(()=>[e(O,{src:r.img,fit:"cover"},null,8,["src"])]),_:1}),e(B,{name:"map"},{default:l(()=>[e(R,{latitude:r.latitude,longitude:r.longitude,state:"delete"},null,8,["latitude","longitude"])]),_:1})]),_:1},8,["modelValue"]),e(_,null,{default:l(()=>[e(g,{fab:"",color:"primary",icon:"place",class:"absolute",style:{top:"0",right:"12px",transform:"translateY(-50%)"},onClick:o[2]||(o[2]=P=>p())}),k("div",oe,[k("div",ie,b(r.title),1)])]),_:1}),e(_,{class:"q-pt-none"},{default:l(()=>[k("div",ue,b(s.username),1),k("div",ne,b(s.description),1)]),_:1}),e(A),e(M,{align:"right"},{default:l(()=>[e(g,{color:"light-blue-8","icon-right":"close",label:"Cancel",onClick:u}),e(g,{color:"red","icon-right":"delete",label:"Remove",onClick:n})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),pe={class:"q-pa-md"},Ue=N({__name:"AllPostsPage",setup(r){const m=c(""),s=c({id:0,title:"",description:"",latitude:0,longitude:0}),t=c({id:0,img:"",title:"",username:"",description:"",latitude:0,longitude:0}),p=c(!1),i=u=>{s.value.id=u.id,s.value.title=u.title,s.value.description=u.description,s.value.latitude=u.latitude,s.value.longitude=u.longitude,p.value=!0},d=c(!1),v=u=>{t.value.id=u.id,t.value.img=`http://127.0.0.1:8000/${u.media[0].url}`,t.value.title=u.title,t.value.username=u.username,t.value.description=u.description,t.value.latitude=u.latitude,t.value.longitude=u.longitude,d.value=!0};return(u,n)=>(f(),y(V,null,[k("div",pe,[e(G,{grid:u.$q.screen.xs,title:"All Posts",rows:Q(E),columns:Q(ee),"row-key":"name",filter:m.value,"rows-per-page-options":[0],pagination:Q(h),"onUpdate:pagination":n[1]||(n[1]=a=>J(h)?h.value=a:null),onRequest:Q($)},{"top-right":l(()=>[e(D,{borderless:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=a=>m.value=a),placeholder:"Search"},{append:l(()=>[e(T,{name:"search"})]),_:1},8,["modelValue"])]),header:l(a=>[e(S,{props:a},{default:l(()=>[(f(!0),y(V,null,U(a.cols,o=>(f(),C(I,{key:o.name,props:a},{default:l(()=>[x(b(o.label),1)]),_:2},1032,["props"]))),128)),e(I,{"auto-width":""},{default:l(()=>[x(" Tools ")]),_:1})]),_:2},1032,["props"])]),body:l(a=>[e(S,{props:a},{default:l(()=>[(f(!0),y(V,null,U(a.cols,o=>(f(),C(F,{key:o.name,props:a},{default:l(()=>[x(b(o.value),1)]),_:2},1032,["props"]))),128)),e(F,{"auto-width":""},{default:l(()=>[e(g,{class:"q-ma-sm",size:"md",color:"warning",dense:"",icon:"update",onClick:o=>i(a.row)},null,8,["onClick"]),e(g,{class:"q-ma-sm",size:"md",color:"red",dense:"",icon:"delete",onClick:o=>v(a.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["grid","rows","columns","filter","pagination","onRequest"])]),e(se,{"model-value":p.value,"onUpdate:modelValue":n[2]||(n[2]=a=>p.value=a),id:s.value.id,title:s.value.title,description:s.value.description,latitude:s.value.latitude,longitude:s.value.longitude,refresh:Q($)},null,8,["model-value","id","title","description","latitude","longitude","refresh"]),e(me,{"model-value":d.value,"onUpdate:modelValue":n[3]||(n[3]=a=>d.value=a),id:t.value.id,img:t.value.img,title:t.value.title,username:t.value.username,description:t.value.description,latitude:t.value.latitude,longitude:t.value.longitude,refresh:Q($)},null,8,["model-value","id","img","title","username","description","latitude","longitude","refresh"])],64))}});export{Ue as default};
