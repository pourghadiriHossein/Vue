import{Q as b,a as S}from"./QBtn.6cab167c.js";import{Q as k}from"./QInput.43f86c85.js";import{d as G,Q as J,a as W,b as X,c as Z}from"./QTable.77a9550e.js";import{U as K}from"./user.0763f066.js";import{s as p,A as D,o as U,c as V,w as a,a as e,V as F,W as q,X as N,Y as y,Z as Q,$ as x,a4 as E,a0 as P,E as T,j as O,C,ac as j}from"./index.fc4d1fc7.js";import{Q as f,a as Y,b as z}from"./QCard.40996e4c.js";import{Q as M,a as $,b as R,c as H}from"./QFile.e5504ec7.js";import{Q as I}from"./QSeparator.a2d8f17d.js";import{Q as L}from"./QDialog.fdb88d66.js";import{Q as ee}from"./QAvatar.b97c87ad.js";import"./dom.cd849552.js";import"./scroll.eb09e63a.js";import"./QItemLabel.b40969aa.js";import"./position-engine.bccaf70a.js";const ae=[{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"name",align:"center",label:"User Name",field:"name",sortable:!0},{name:"email",align:"center",label:"E-Mail",field:"email",sortable:!0}],B=p(),_=p({sortBy:"desc",descending:!1,page:1,rowsPerPage:5,rowsNumber:100}),A=i=>{i?K.allUserForAdmin(i.pagination.page).then(m=>{var u,r,l,o,n,c;B.value=m.data.users,_.value.page=(l=(r=(u=m.data.meta)==null?void 0:u.pagination)==null?void 0:r.users.current_page)!=null?l:1,_.value.rowsNumber=(c=(n=(o=m.data.meta)==null?void 0:o.pagination)==null?void 0:n.users.total)!=null?c:1}):K.allUserForAdmin(1).then(m=>{var u,r,l,o,n,c;B.value=m.data.users,_.value.page=(l=(r=(u=m.data.meta)==null?void 0:u.pagination)==null?void 0:r.users.current_page)!=null?l:1,_.value.rowsNumber=(c=(n=(o=m.data.meta)==null?void 0:o.pagination)==null?void 0:n.users.total)!=null?c:1})};A(null);const le=T("div",{class:"text-h6"},"Create New User",-1),te="bg-red q-pa-sm text-white",se="bg-green q-pa-sm text-white",re=D({__name:"AdminCreateUser",props:{modelValue:{default:!1},id:{default:0},username:{default:""},email:{default:""},password:{default:""},options:{default:["admin","user"]},refresh:{}},emits:["update:model-value"],setup(i,{emit:m}){const u=i,r=p(null),l=p({username:u.username,email:u.username,password:u.username,avatar:void 0}),o=p(!0),n=p({error:[],state:""}),c=()=>{o.value=!o.value},g=()=>{m.call(this,"update:model-value",!1)},w=()=>{K.createUserByAdmin(l.value.username,l.value.email,l.value.password,l.value.avatar,r.value).then(d=>{d.status==200&&d.data.errors&&(n.value.error=d.data.errors,n.value.state=se,o.value=!1,u.refresh(),setTimeout(()=>{m.call(this,"update:model-value",!1)},2e3))},d=>{d.response.status!=200&&d.response.data.errors&&(n.value.error=d.response.data.errors,n.value.state=te,o.value=!1)})};return(d,t)=>(U(),V(L,{"model-value":i.modelValue,persistent:""},{default:a(()=>[e(z,{style:{"min-width":"350px"}},{default:a(()=>[e(f,null,{default:a(()=>[le]),_:1}),e(f,{class:"q-pt-none"},{default:a(()=>[e(M,{class:F(n.value.state),hidden:o.value},{default:a(()=>[e($,null,{default:a(()=>[e(b,{size:"sm",color:"transparent",dense:"",icon:"close",onClick:t[0]||(t[0]=s=>c())})]),_:1}),e(I,{inset:"",dark:""}),(U(!0),q(x,null,N(n.value.error,s=>(U(),V($,{key:s},{default:a(()=>[e(R,null,{default:a(()=>[y(Q(s[0]),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["class","hidden"])]),_:1}),e(f,{class:"q-pt-none"},{default:a(()=>[e(k,{dense:"",onKeyup:E(i.modelValue,["enter"]),"model-value":l.value.username,"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.username=s),label:"Enter Your User Name"},null,8,["onKeyup","model-value"])]),_:1}),e(f,{class:"q-pt-none"},{default:a(()=>[e(k,{dense:"",onKeyup:E(i.modelValue,["enter"]),"model-value":l.value.email,"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.email=s),label:"Enter Your E-Mail"},null,8,["onKeyup","model-value"])]),_:1}),e(f,{class:"q-pt-none"},{default:a(()=>[e(k,{type:"password",dense:"",onKeyup:E(i.modelValue,["enter"]),"model-value":l.value.password,"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.password=s),label:"Enter Your Password"},null,8,["onKeyup","model-value"])]),_:1}),e(f,{class:"q-pt-none"},{default:a(()=>[e(H,{filled:"","bottom-slots":"","model-value":l.value.avatar,"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.avatar=s),label:"Avatar",counter:""},{prepend:a(()=>[e(S,{name:"cloud_upload",onClick:t[4]||(t[4]=P(()=>{},["stop","prevent"]))})]),append:a(()=>[e(S,{name:"close",onClick:t[5]||(t[5]=P(s=>l.value.avatar=null,["stop","prevent"])),class:"cursor-pointer"})]),hint:a(()=>[y(" File Size ")]),_:1},8,["model-value"])]),_:1}),e(f,null,{default:a(()=>[e(G,{modelValue:r.value,"onUpdate:modelValue":t[7]||(t[7]=s=>r.value=s),options:i.options,label:"Role"},null,8,["modelValue","options"])]),_:1}),e(Y,{align:"right",class:"text-primary"},{default:a(()=>[e(b,{color:"red","icon-right":"close",label:"Cancel",onClick:g}),e(b,{color:"light-blue-8","icon-right":"create",label:"Create",onClick:w})]),_:1})]),_:1})]),_:1},8,["model-value"]))}});const ue={class:"text-h6"},oe="bg-red q-pa-sm text-white",ne="bg-green q-pa-sm text-white",de=D({__name:"AdminUpdateUser",props:{modelValue:{default:!1},id:{default:0},username:{default:""},email:{default:""},password:{default:""},role:{default:"user"},options:{default:["admin","user"]},refresh:{}},emits:["update:model-value"],setup(i,{emit:m}){const u=i,r=p(),l=p({username:"",email:"",password:"",avatar:void 0});O(u,()=>{l.value={username:u.username,email:u.email,password:"",avatar:void 0},r.value=u.role});const o=p(!0),n=p({error:[],state:""}),c=()=>{o.value=!o.value},g=()=>{m.call(this,"update:model-value",!1)},w=()=>{K.updateUserByAdmin(u.id,l.value.username,l.value.email,l.value.password,l.value.avatar,r.value).then(d=>{d.status==200&&d.data.errors&&(n.value.error=d.data.errors,n.value.state=ne,o.value=!1,u.refresh(),setTimeout(()=>{m.call(this,"update:model-value",!1)},2e3))},d=>{d.response.status!=200&&d.response.data.errors&&(n.value.error=d.response.data.errors,n.value.state=oe,o.value=!1)})};return(d,t)=>(U(),V(L,{"model-value":i.modelValue,persistent:""},{default:a(()=>[e(z,{style:{"min-width":"350px"}},{default:a(()=>[e(f,null,{default:a(()=>[T("div",ue,"Update "+Q(i.username),1)]),_:1}),e(f,{class:"q-pt-none"},{default:a(()=>[e(M,{class:F(n.value.state),hidden:o.value},{default:a(()=>[e($,null,{default:a(()=>[e(b,{size:"sm",color:"transparent",dense:"",icon:"close",onClick:t[0]||(t[0]=s=>c())})]),_:1}),e(I,{inset:"",dark:""}),(U(!0),q(x,null,N(n.value.error,s=>(U(),V($,{key:s},{default:a(()=>[e(R,null,{default:a(()=>[y(Q(s[0]),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["class","hidden"])]),_:1}),e(f,{class:"q-pt-none"},{default:a(()=>[e(k,{dense:"",onKeyup:E(i.modelValue,["enter"]),"model-value":l.value.username,"onUpdate:modelValue":t[1]||(t[1]=s=>l.value.username=s),label:"Enter Your User Name"},null,8,["onKeyup","model-value"])]),_:1}),e(f,{class:"q-pt-none"},{default:a(()=>[e(k,{dense:"",onKeyup:E(i.modelValue,["enter"]),"model-value":l.value.email,"onUpdate:modelValue":t[2]||(t[2]=s=>l.value.email=s),label:"Enter Your E-Mail"},null,8,["onKeyup","model-value"])]),_:1}),e(f,{class:"q-pt-none"},{default:a(()=>[e(k,{type:"password",dense:"",onKeyup:E(i.modelValue,["enter"]),"model-value":l.value.password,"onUpdate:modelValue":t[3]||(t[3]=s=>l.value.password=s),label:"Enter Your Password"},null,8,["onKeyup","model-value"])]),_:1}),e(f,{class:"q-pt-none"},{default:a(()=>[e(H,{filled:"","bottom-slots":"","model-value":l.value.avatar,"onUpdate:modelValue":t[6]||(t[6]=s=>l.value.avatar=s),label:"Avatar",counter:""},{prepend:a(()=>[e(S,{name:"cloud_upload",onClick:t[4]||(t[4]=P(()=>{},["stop","prevent"]))})]),append:a(()=>[e(S,{name:"close",onClick:t[5]||(t[5]=P(s=>l.value.avatar=null,["stop","prevent"])),class:"cursor-pointer"})]),hint:a(()=>[y(" File Size ")]),_:1},8,["model-value"])]),_:1}),e(f,null,{default:a(()=>[e(G,{modelValue:r.value,"onUpdate:modelValue":t[7]||(t[7]=s=>r.value=s),options:i.options,label:"Role"},null,8,["modelValue","options"])]),_:1}),e(Y,{align:"right",class:"text-primary"},{default:a(()=>[e(b,{color:"red","icon-right":"close",label:"Cancel",onClick:g}),e(b,{color:"light-blue-8","icon-right":"create",label:"Create",onClick:w})]),_:1})]),_:1})]),_:1},8,["model-value"]))}});const ie={class:"q-ml-sm"},me="bg-red q-pa-sm text-white",ve="bg-green q-pa-sm text-white",pe=D({__name:"AdminDeleteUser",props:{modelValue:{default:!1},id:{default:0},username:{default:"No username"},email:{default:"No E-Mail"},refresh:{}},emits:["update:model-value"],setup(i,{emit:m}){const u=i,r=p(!0),l=p({error:[],state:""}),o=()=>{r.value=!r.value},n=()=>{m.call(this,"update:model-value",!1)},c=()=>{K.deleteUserByAdmin(u.id).then(g=>{g.status==200&&g.data.errors&&(l.value.error=g.data.errors,l.value.state=ve,r.value=!1,u.refresh(),setTimeout(()=>{m.call(this,"update:model-value",!1)},2e3))},g=>{g.response.status!=200&&g.response.data.errors&&(l.value.error=g.response.data.errors,l.value.state=me,r.value=!1)})};return(g,w)=>(U(),V(L,{"model-value":i.modelValue,persistent:""},{default:a(()=>[e(z,null,{default:a(()=>[e(f,null,{default:a(()=>[e(M,{class:F(l.value.state),hidden:r.value},{default:a(()=>[e($,null,{default:a(()=>[e(b,{size:"sm",color:"transparent",dense:"",icon:"close",onClick:w[0]||(w[0]=d=>o())})]),_:1}),e(I,{inset:"",dark:""}),(U(!0),q(x,null,N(l.value.error,d=>(U(),V($,{key:d},{default:a(()=>[e(R,null,{default:a(()=>[y(Q(d[0]),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["class","hidden"])]),_:1}),e(f,{class:"row items-center"},{default:a(()=>[e(ee,{icon:"person",color:"primary","text-color":"white"}),T("span",ie,"Are You Sure, Want You To Delete "+Q(i.username)+"?",1)]),_:1}),e(Y,{align:"right"},{default:a(()=>[e(b,{color:"light-blue-8","icon-right":"close",label:"Cancel",onClick:n}),e(b,{color:"red","icon-right":"delete",label:"Delete",onClick:c})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),fe={class:"q-pa-md"},Ee=D({__name:"AllUsersPage",setup(i){const m=p(""),u=p({id:0,username:"",email:""}),r=p({id:0,username:"",email:"",role:""}),l=p({id:0,username:"",email:""}),o=p(!1),n=()=>{u.value.id=0,u.value.username="",u.value.email="",o.value=!0},c=p(!1),g=t=>{r.value.id=t.id,r.value.username=t.name,r.value.email=t.email,r.value.role=t.roles[0].name,c.value=!0},w=p(!1),d=t=>{l.value.id=t.id,l.value.username=t.name,l.value.email=t.email,w.value=!0};return(t,s)=>(U(),q(x,null,[T("div",fe,[e(J,{grid:t.$q.screen.xs,title:"\u064EAll Users",rows:C(B),columns:C(ae),"row-key":"name",filter:m.value,"rows-per-page-options":[0],pagination:C(_),"onUpdate:pagination":s[3]||(s[3]=v=>j(_)?_.value=v:null),onRequest:C(A)},{"top-right":a(()=>[e(k,{borderless:"",dense:"",debounce:"300",modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=v=>m.value=v),placeholder:"Search"},{append:a(()=>[e(S,{name:"search"})]),_:1},8,["modelValue"]),e(b,{label:"Create New User",color:"light-blue-8",class:"q-ml-md",onClick:s[1]||(s[1]=v=>n())}),e(re,{"model-value":o.value,"onUpdate:modelValue":s[2]||(s[2]=v=>o.value=v),id:u.value.id,username:u.value.username,email:u.value.email,refresh:C(A)},null,8,["model-value","id","username","email","refresh"])]),header:a(v=>[e(W,{props:v},{default:a(()=>[(U(!0),q(x,null,N(v.cols,h=>(U(),V(X,{key:h.name,props:v},{default:a(()=>[y(Q(h.label),1)]),_:2},1032,["props"]))),128)),e(X,{"auto-width":""},{default:a(()=>[y(" Tools ")]),_:1})]),_:2},1032,["props"])]),body:a(v=>[e(W,{props:v},{default:a(()=>[(U(!0),q(x,null,N(v.cols,h=>(U(),V(Z,{key:h.name,props:v},{default:a(()=>[y(Q(h.value),1)]),_:2},1032,["props"]))),128)),e(Z,{"auto-width":""},{default:a(()=>[e(b,{class:"q-ma-sm",size:"md",color:"warning",dense:"",icon:"update",onClick:h=>g(v.row)},null,8,["onClick"]),e(b,{class:"q-ma-sm",size:"md",color:"red",dense:"",icon:"delete",onClick:h=>d(v.row)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["props"])]),_:1},8,["grid","rows","columns","filter","pagination","onRequest"])]),e(de,{"model-value":c.value,"onUpdate:modelValue":s[4]||(s[4]=v=>c.value=v),id:r.value.id,username:r.value.username,email:r.value.email,role:r.value.role,refresh:C(A)},null,8,["model-value","id","username","email","role","refresh"]),e(pe,{"model-value":w.value,"onUpdate:modelValue":s[5]||(s[5]=v=>w.value=v),id:l.value.id,username:l.value.username,email:l.value.email,refresh:C(A)},null,8,["model-value","id","username","email","refresh"])],64))}});export{Ee as default};
